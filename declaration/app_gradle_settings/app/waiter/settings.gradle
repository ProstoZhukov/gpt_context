/** Подключаем возможность управления глобальными настройками для сборки моб. приложений. */
apply from: "../global_settings.gradle"

/** Расшифровка списка сабмодулей, которые зарегистрированы в проекте. */
parseGitSubmodules(settings)

/** Применяем глобальные настройки для моб. приложений. */
setupGlobalSettings(settings)

def appName = "waiter"

includeSubmodules(
        settings,
        appName,
        "auth",
        "common-catalog-items",
        "barcodereader",
        "catalog",
        "common",
        "crm",
        "design",
        "declaration",
        "disk",
        "kitchen",
        "motivation",
        "presto-common",
        "review",
        "payment"
)

include ':app', ':controller'

includeControllerSources(settings, appName)

Closure<Settings> commonModules = {
    include ':menu_waiter'
    project(':menu_waiter').projectDir = new File("local_features/menu_waiter")

    include ':themes_waiter'
    project(':themes_waiter').projectDir = new File("local_features/waiter_settings/themes_waiter")

    include ':settings_feature'
    project(':settings_feature').projectDir = new File("local_features/waiter_settings/waiter_settings_features")

    include ':settings_impl'
    project(':settings_impl').projectDir = new File("local_features/waiter_settings/waiter_settings_impl")

    include ':accept_dangerous_action_features'
    project(':accept_dangerous_action_features').projectDir = new File("local_features/accept_dangerous_action/accept_dangerous_action_features")

    include ':accept_dangerous_action_impl'
    project(':accept_dangerous_action_impl').projectDir = new File("local_features/accept_dangerous_action/accept_dangerous_action_impl")

    include ':delete_nomenclatures_features'
    project(':delete_nomenclatures_features').projectDir = new File("local_features/delete_nomenclatures/delete_nomenclatures_features")

    include ':delete_nomenclatures_impl'
    project(':delete_nomenclatures_impl').projectDir = new File("local_features/delete_nomenclatures/delete_nomenclatures_impl")

    include ':transfer_nomenclatures_feature'
    project(':transfer_nomenclatures_feature').projectDir = new File("local_features/transfer_nomenclatures/transfer_nomencaltures_feature")

    include ':transfer_nomenclatures_impl'
    project(':transfer_nomenclatures_impl').projectDir = new File("local_features/transfer_nomenclatures/transfer_nomencaltures_impl")

    include ':waiter_common_feature'
    project(':waiter_common_feature').projectDir = new File("local_features/waiter_common_feature")

    include ':waiter_common_feature'
    project(':waiter_common_feature').projectDir = new File("local_features/waiter_common_feature")

    include ':detail_info_feature'
    project(':detail_info_feature').projectDir = new File("local_features/detail_info/detail_info_feature")

    include ':detail_info_impl'
    project(':detail_info_impl').projectDir = new File("local_features/detail_info/detail_info_impl")

    include ':paid_sale_ui_feature'
    project(':paid_sale_ui_feature').projectDir = new File("local_features/paid_sale/paid_sale_feature")

    include ':paid_sale_ui_impl'
    project(':paid_sale_ui_impl').projectDir = new File("local_features/paid_sale/paid_sale_impl")

    include ':booking_card_feature'
    project(':booking_card_feature').projectDir = new File("local_features/booking/card/feature")

    include ':booking_card_impl'
    project(':booking_card_impl').projectDir = new File("local_features/booking/card/impl")

    include ':notifications_feature'
    project(':notifications_feature').projectDir = new File("local_features/notifications/feature")

    include ':notifications_impl'
    project(':notifications_impl').projectDir = new File("local_features/notifications/impl")

    include ':waiter_design'
    project(':waiter_design').projectDir = new File("local_features/waiter_design")

}

splitAppByRegion(settings, appName) {
    ru {
        settingsConfig {
            extraModules(commonModules)
        }
        appConfig {
            applicationId = "ru.tensor.waiter.saby"
            accountType = AndroidAccountManager.SABY_ACCOUNT.type + applicationId
        }
    }
    kz {
        settingsConfig {
            extraModules(commonModules)
        }
        appConfig {
            applicationId = "kz.setty.waiter"
            accountType = AndroidAccountManager.SETTY_BUNDLE_ACCOUNT.type
        }
    }
}
