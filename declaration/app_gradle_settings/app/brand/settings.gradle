apply from: "../global_settings.gradle"

parseGitSubmodules(settings)

setupGlobalSettings(settings)

def appName = "brand"

ext.feature_dir = 'feature'
apply from: "$settingsDir/$feature_dir/settings.gradle"

includeSubmodules(
        settings,
        appName,
        "saby-clients-common",
        "review",
        "auth",
        "barcodereader",
        "business-components",
        "catalog",
        "common",
        "common-catalog-items",
        "communicator",
        "declaration",
        "design",
        "electronic-queue",
        "edo",
        "employee",
        "map",
        "disk",
        "news",
        "notification",
        "user-payment",
        "profile",
        "videocall",
)

include ':app', ':controller'

includeControllerSources(settings, appName)

splitAppByRegion(settings, appName, null, false) {
    ru {
        appConfig {
            def brandName = System.getenv("BRAND_APPLICATION_ID_SUFFIX") as String ?: "mili"
            String sabyBrandBundleAccountType = "SABY.${brandName.capitalize()}Account"
            accountType = sabyBrandBundleAccountType
        }
        rootProjectConfig {
            apply plugin: 'social-integration'

            def appPackageName = "ru.saby.clients.brand"
            /* :link_opener */
            sabyLinks.setup { set ->
                set.component = "${appPackageName}.presentation.main.MainActivity"
                set.enableLinkSabyBrand = true
                set.enableLinkSabyGetBrandCommon = true
                set.newsFeature = true
                set.videoCallFeature = true
                set.brandSabyClientsFeature = true
                set.enableQrAuthAndInstallApp = false
                set.enableLinkSabyMyPageLink = false
            }

            // Настройки соц. сетей
            socialServices {
                esiaEnabled = true
            }
        }
    }
    kz {
        appConfig {
            def brandName = System.getenv("BRAND_APPLICATION_ID_SUFFIX") as String ?: "mili"
            String sabyBrandBundleAccountType = "Setty.${brandName.capitalize()}Account"
            accountType = sabyBrandBundleAccountType
        }
        rootProjectConfig {
            apply plugin: 'social-integration'

            def appPackageName = "ru.saby.clients.brand"
            /* :link_opener */
            sabyLinks.setup { set ->
                set.component = "${appPackageName}.presentation.main.MainActivity"
                set.enableLinkSabyBrand = true
                set.enableLinkSabyGetBrandCommon = true
                set.newsFeature = true
                set.videoCallFeature = false
                set.brandSabyClientsFeature = true
                set.enableQrAuthAndInstallApp = false
                set.enableLinkSabyMyPageLink = false
            }
            // Настройки соц. сетей
            socialServices {
                esiaEnabled = false
            }
        }
    }
}