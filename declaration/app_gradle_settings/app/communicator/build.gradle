// Top-level build file where you can add configuration options common to all sub-projects/modules.
apply plugin: 'rootproject-cfg-plugin'

rootProjectConfig { cfg ->
    cfg.enableResolutionStrategyCfg()
    cfg.enableTaskCounterCfg()
    cfg.enableMuteLintCfg()
    cfg.enableDokkaCfg()
    cfg.enableKaptSubprojectsCfg()
    cfg.enableSabyLinkCfg()
    if (rootProject.ext.ciBuild) {
        cfg.enableTaskFilterCfg()
    }
}

project.ext {
    minSdkVersion = 24

    def appPackageName = "ru.tensor.sbis.droid.saby"

    if (isHmsBuild()) {
        applicationId += ".huawei"
    }

    defaultActivity = "${appPackageName}.MainActivity"

    /* :link_opener */
    sabyLinks.setup { set ->
        set.component = "${appPackageName}.MainActivity"
        set.enableOnlineSbis = false
        set.enableLinkWebinar = true
        set.enableLinkMeeting = true
        set.enableLinkVideoconf = true
        set.enableLinkChat = true
        set.enableLinkDialog = true
        set.enableLinkOpendocCard = true
        set.enableLinkDiskDoc = true
        set.enableLinkPerson = true
        set.enableLinkEvent = true
        set.enableLinkCall = true
        set.enableLinkNews = true
        set.enableLinkRetailDevice = true
        set.enableLinkContractorsCard = true
        set.enableLinkSbisPageLink = true
        set.enableLinkCertificateSubmission = true
        set.enableLinkSettingCertificatePassword = true
        // редиректы
        set.personCardFeature = true
        set.eSignFeature = true
        set.violationFeature = true
        set.videoCallFeature = true
        set.newsFeature = true
        set.attachmentsFeature = true
        set.calendarFeature = true
        set.themesRegistryFeature = true
        set.contractorsCardFeature = true
        set.docViewFeature = true
        set.meetingFeature = true
        set.inviteFeature = true
        set.taskFeature = true
        set.deviceLinkerFeature = true
        set.myDocumentsFeature = true
    }
}

rootProject.ext {
    setProperty(
            "push-cloud-messaging",
            [
                    "push-notification-multi-process": "ON"
            ]
    )
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
