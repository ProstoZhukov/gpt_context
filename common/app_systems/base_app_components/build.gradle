import ru.tensor.gradle.subconfig.customization.feature.BinaryMode

apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-kapt'
apply plugin: 'submodule-cfg-plugin'

submoduleConfig { cfg ->
    cfg.enableFlavorsCfg()
    cfg.enableBaseModuleCfg()
    cfg.enableOptimizeCodeCfg()
    cfg.enableViewBindingCfg()
    cfg.enableBuildConfigGeneration()
    cfg.enableFeatureSplit()
}

features {
    binaryFeature("navx", BinaryMode.ON) {
        variant(BinaryMode.ON) {
            main {
                dependencies {
                    implementation project(':navigation_service')
                }
            }
        }
    }
}

android {
    namespace "ru.tensor.sbis.base_app_components"

    defaultConfig {
        buildConfigField "String", "APPLICATION_ID", "\"${rootProject.ext.applicationId}\""
    }
}

dependencies {
    implementation project(':application-tools')
    implementation project(':auth_content')
    implementation project(':auth_settings')
    implementation project(':core_saby_app')
    implementation project(':common')
    implementation project(':common_firebase_trace')
    implementation project(':design_change_theme')
    implementation project(':design_progress')
    implementation project(':design_top_navigation')
    implementation project(':design_utils')
    implementation project(':controller')
    implementation project(':controller_utils')
    implementation project(':fresco-bincontent')
    implementation project(':fresco_utils')
    implementation project(':language')
    implementation project(':list')
    api project(':master_detail')
    implementation project(':plugin_manager')
    implementation project(':settings-screen')
    implementation project(':design_sbis_text_view')
    implementation project(':local_feature_toggle')
    implementation project(':app_init')

    implementation "com.jakewharton.timber:timber:$rootProject.ext.timberVersion"

    implementation "com.facebook.fresco:imagepipeline-okhttp3:$rootProject.ext.frescoVersion"
    implementation "com.facebook.fresco:fresco:$rootProject.ext.frescoVersion"

    implementation platform("com.google.firebase:firebase-bom:$rootProject.ext.firebaseBomVersion")
    implementation "com.google.firebase:firebase-crashlytics"

    implementation "io.appmetrica.analytics:analytics:$rootProject.ext.yandexAppMetricaVersion"
}