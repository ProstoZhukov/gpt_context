apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'submodule-cfg-plugin'

submoduleConfig { cfg ->
    cfg.enableBaseModuleCfg()
    cfg.enableDataBindingCfg()
}

android {
    namespace "ru.tensor.sbis.common.testing"
}

dependencies {
    //Все зависимости должны быть вида api - это нужно для корректной работы тестов
    api "nl.jqno.equalsverifier:equalsverifier:$rootProject.ext.equalsVerifierVersion"
    api "io.reactivex.rxjava2:rxjava:$rootProject.ext.rxVersion"
    api "io.reactivex.rxjava2:rxandroid:$rootProject.ext.rxAndroidVersion"
    api "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion"
    api "org.jetbrains.kotlinx:kotlinx-coroutines-test:$kotlinxCoroutinesCoreVersion"
    api "androidx.test.ext:junit:$rootProject.ext.androidxJunit"
    //noinspection GradleCompatible
    api "androidx.appcompat:appcompat:$rootProject.ext.appCompatVersion"
    api "junit:junit:$rootProject.ext.junitVersion"
    api 'pl.pragmatists:JUnitParams:1.1.1'
    api "org.mockito:mockito-core:$rootProject.ext.mockitoCoreVersion"
    api "org.mockito:mockito-inline:$rootProject.ext.mockitoInlineVersion"
    api "org.mockito.kotlin:mockito-kotlin:$rootProject.ext.mockitokotlin2Version"
    api "io.mockk:mockk:$rootProject.ext.mockkVersion"
    api("org.robolectric:robolectric:$rootProject.ext.robolectricVersion") {
        // https://github.com/robolectric/robolectric/issues/5245
        exclude group: 'com.google.auto.service', module: 'auto-service'

        // https://github.com/robolectric/robolectric/issues/5485
        exclude group: 'org.apache.maven', module: 'maven-ant-tasks'
    }
    api "androidx.arch.core:core-testing:$rootProject.ext.archCoreTestingVersion"
    api "androidx.test:core-ktx:${rootProject.ext.testCoreVersion}"
    //noinspection FragmentGradleConfiguration
    api "androidx.fragment:fragment-testing:${rootProject.ext.fragmentTestVersion}"
    testApi 'org.apache.maven:maven-ant-tasks:2.1.3'
    api "org.junit.jupiter:junit-jupiter-api:${rootProject.ext.junitJupiterApiVersion}"
    api "org.junit.jupiter:junit-jupiter-engine:${rootProject.ext.junitJupiterEngineVersion}"
    api "org.junit.jupiter:junit-jupiter-params:${rootProject.ext.junitJupiterParamsVersion}"
    api "org.junit.vintage:junit-vintage-engine:${rootProject.ext.junitVintageEngineVersion}"
}