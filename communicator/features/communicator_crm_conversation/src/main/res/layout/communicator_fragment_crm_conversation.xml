<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/communicator_layout_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clipChildren="false"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:orientation="vertical">

    <!-- Toolbar -->
    <ru.tensor.sbis.design.topNavigation.view.SbisTopNavigationView
        android:id="@+id/communicator_crm_conversation_toolbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:SbisTopNavigation_showBackButton="true"
        app:SbisTopNavigation_smallTitleMaxLines="1"/>

    <ru.tensor.sbis.communicator.crm.conversation.presentation.ui.MessageCrudListView
        android:id="@+id/communicator_crm_conversation_sbis_list_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/communicator_crm_conversation_toolbar"
        android:background="?unaccentedAdaptiveBackgroundColor"
        android:clickable="true"
        android:focusable="true"
        android:textColorLink="?linkTextColor"
        app:progressDelayMillis="@integer/communicator_progress_delay_ms"
        app:withSwipe="false"/>

    <ru.tensor.sbis.design.list_header.HeaderDateView
        android:id="@+id/communicator_conversation_fragment_date_header_view"
        style="@style/CommunicatorConversationDateHeaderDateViewTheme"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@id/communicator_crm_conversation_sbis_list_view"
        android:layout_alignEnd="@id/communicator_crm_conversation_sbis_list_view"
        android:layout_marginEnd="?offset_2xs"/>

    <ru.tensor.sbis.message_panel.view.MessagePanel
        android:id="@+id/communicator_crm_conversation_message_panel"
        style="@style/ConversationMessagePanel"
        android:elevation="?elevation_s"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:topOffset="@dimen/message_panel_default_top_offset"
        app:MessagePanel_adjustPositionOnKeyboardChanges="false"/>

    <ru.tensor.sbis.design.message_view.content.crm_views.greetings_view.GreetingsView
        android:id="@+id/communicator_crm_greetings_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/communicator_crm_action_buttons"
        android:layout_alignParentEnd="true"
        android:visibility="gone"/>

    <ru.tensor.sbis.communicator.crm.conversation.presentation.ui.action_buttons.CRMActionButtons
        android:id="@+id/communicator_crm_action_buttons"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginHorizontal="?offset_m"
        android:layout_marginBottom="?offset_l"
        android:visibility="gone"/>

    <ru.tensor.sbis.design.buttons.SbisRoundButton
        android:id="@+id/communicator_crm_history_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/communicator_crm_conversation_toolbar"
        android:layout_alignParentStart="true"
        android:layout_marginStart="?offset_m"
        android:layout_marginTop="?offset_2xs"
        app:SbisRoundButton_icon="@string/design_mobile_icon_menu"
        app:SbisRoundButton_iconSize="xl"
        app:SbisRoundButton_size="xs"
        app:SbisRoundButton_style="def"/>

    <ru.tensor.sbis.design.buttons.SbisRoundButton
        android:id="@+id/communicator_crm_navigation_fab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentEnd="true"
        android:layout_alignParentBottom="true"
        android:layout_marginEnd="?offset_m"
        android:layout_marginBottom="?offset_m"
        android:elevation="?elevation_xl"
        android:visibility="visible"
        app:SbisRoundButton_icon="@string/design_mobile_icon_action_add"
        app:SbisRoundButton_style="navigation"
        app:layout_behavior="@string/navigation_fab_behavior_with_bottom_navigation"
        tools:ignore="RelativeOverlap"/>

    <ru.tensor.sbis.design_dialogs.movablepanel.MovablePanel
        android:id="@+id/communicator_crm_conversation_movable_panel"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/communicator_crm_conversation_toolbar"
        android:focusableInTouchMode="true"
        app:MovablePanel_background="?contrastBackgroundColor"
        app:MovablePanel_contentContainerId="@+id/communicator_crm_conversation_panel_container_id"
        app:MovablePanel_topDownDirection="true"/>

    <ru.tensor.sbis.design_dialogs.movablepanel.MovablePanel
        android:id="@+id/communicator_crm_conversation_quick_reply_on_button"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:elevation="?elevation_s"
        app:MovablePanel_background="?infoSameBackgroundColor"
        app:MovablePanel_contentContainerId="@+id/communicator_crm_conversation_quick_reply_on_button_panel_container_id"
        app:MovablePanel_gripColor="?unaccentedContrastBackgroundColor"
        app:MovablePanel_shadowBackgroundEnabled="true"
        app:MovablePanel_shadowBackgroundColor="@android:color/transparent"/>

    <ru.tensor.sbis.design_dialogs.movablepanel.MovablePanel
        android:id="@+id/communicator_crm_conversation_quick_reply_on_text"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentEnd="true"
        android:layout_alignParentBottom="true"
        android:elevation="?elevation_xs"
        android:focusableInTouchMode="true"
        app:MovablePanel_background="?infoSameBackgroundColor"
        app:MovablePanel_contentContainerId="@+id/communicator_crm_conversation_quick_reply_on_search_panel_container_id"
        app:MovablePanel_gripColor="?unaccentedContrastBackgroundColor"/>

</RelativeLayout>